<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<div layout:fragment="content">
    <div class="w-75 mx-auto my-4">
        <div class="card" >
            <div class="card-body d-flex justify-content-between align-items-center">
                <div id="profile" class="col-1 me-1">
                    <img class="img-thumbnail rounded-circle w-100 h-100" style="image-size:cover"
                         src="https://taegon.kim/wp-content/uploads/2018/05/image-5.png">
<!--                         th:src="@{'{path}'(path=${c.user.imgPath})}">-->
                </div>
                <div class="col-2 text-center" >
                    <strong th:text="${c.user.nkName}"></strong>
                    (@<span th:text="${c.user.uId}"></span>)
                </div>
                <h4 class="card-title col-8" th:text="${c.title}"></h4>
                <div class="col-1">
                    <a th:href="@{'/comm/{cId}/modify.do'(cId=${c.cId})}" class="btn btn-sm btn-outline-dark">수정</a>
                </div>
            </div>
            <p class="text-end text-muted me-2">
                <small>작성일: <span th:text="${#dates.format(c.postTime,'yyyy-MM-dd')}"></span></small>
                <small>수정일: <span th:text="${#dates.format(c.updateTime,'yyyy-MM-dd')}"></span></small>
                <small><i class="bi bi-eye"></i>조</small>
            </p>
            <div class="card-body">
                <div th:if="${c.imgs!=null}" th:id="'carousel'+${c.cId}" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item" th:each="img,state:${c.imgs}" th:classappend="${(state.first)?'active':''}">
                            <img th:src="@{'{path}'(path=${img.imgPath})}" class="d-block w-100" alt="게시글 이미지">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" th:data-bs-target="'#carousel'+${c.cId}" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" th:data-bs-target="'#carousel'+${c.cId}" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>

            <div class="card-body">
                <h5 class="card-title" >일정들어가는곳</h5>
            </div>
            <hr>
            <div class="card-body d-flex justify-content-end align-items-center" >
                <div class=" text-end fs-3 ">
                    <a href=""><i class="bi bi-heart text-danger me-2" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="좋아요"></i></a>
                    <a href=""><i class="bi bi-calendar-plus text-secondary me-2" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="내일정바로추가"></i></a>
                    <a href=""><i class="bi bi-bookmark-plus text-warning me-2" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="북마크"></i></a>
                    <a href=""><i class="bi bi-bell-fill text-danger" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="신고하기"></i></a>

                </div>

            </div>
            <div class="card-body">
                <p class="mb-1">추천 MBTI</p>
                <p id="mbtiChk">
                    <a href="#" class="" th:classappend="${c.istj}?'btn btn-secondary btn-sm rounded-5 p-1 m-1':''"  type="button">
                        <i class="bi bi-hash"></i>
                        <span>istj</span>
                    </a>

                </p>
            </div>
            <div class="card-body me-4 fs-4 text-center ">
                <a  class="text-decoration-none text-muted" href="#contentPage" >상세페이지</a>
                <span>|</span>
                <a class="text-decoration-none text-muted" href="#repliesPage" >덧글</a>
            </div>

            <div class="card-body" id="contentPage">
                <p class="card-text" th:utext="${c.content}"> </p>
            </div>

            <!--답글 구현-->
            <div class="card-body" id="repliesPage">
                <h5>댓글</h5>
                <div id="replyCont">
                    <ul class="list-group" >
                        <li class="list-group-item" th:each="r:${c.replies}">
                            <th:block th:include="/comm/reply/detail"></th:block>
                        </li>
                    </ul>
                </div>
                <form name="replyInsertForm"  action="/comm/reply/insert.do" method="post">
<!--                    <input type="hidden" name="uId" th:value="">-->
                    <input type="hidden" name="cId" th:value="${c.cId}">
                   <div class="d-flex">
                    <div class="col-3 p-0">
                        <input type="text" class="form-control" name="parentCrId" >
                    </div>
                    <div class="col p-0">
                      <input type="text" class="form-control" name="content" placeholder="댓글내용">
                    </div>
                    <button class="btn btn-secondary">제출</button>
                   </div>
                </form>

            </div>
        </div>
    </div>
</div>
</html>