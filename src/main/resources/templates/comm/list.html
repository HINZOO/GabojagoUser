<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<div layout:fragment="content">
    <section id="commListContainer" class="row">
        <h2>가보자고(Community)</h2>
        <p class="text-end">
            <a class="btn btn-outline-success me-5" href="/comm/register.do">글쓰기</a>
        </p>
        <hr>
        <div class="col-11 my-2" th:each="c:${communities}">
            <div class="card" >
                <div class="row no-gutters">
                    <div class="col-4" th:if="${c.imgs!=null && state.index==0}"th:each="img,state:${c.imgs}">
                        <img th:src="@{'{path}'(path=${img.imgPath})}" alt="게시글 이미지">
                        <div class="card-img-overlay col-4">
                            <p class="card-text text-white text-end me-3">
                                <i class="bi bi-heart fs-3"></i>
                            </p>
                        </div>
                    </div>

                    <div class="col-8">
                        <div class="card-body">
                            <h4 class="card-title" >
                                <a class="text-decoration-none text-dark" th:text="${c.title}" th:href="@{'/comm/{cId}/detail.do'(cId=${c.cId})}"></a>
                            </h4>
                            <p>
                                <i class="bi bi-person fs-5"></i>
                                <strong class="me-1" th:text="${c.user.nkName}"></strong>
                                <small class="text-muted me-1" th:text="P.+${#dates.format(c.postTime,'yyyy-MM-dd')}"></small>
                                <small class="text-muted me-1" th:text="M.+${#dates.format(c.updateTime,'yyyy-MM-dd')}"></small>
                                <small class="text-muted">조회수</small> </p>
                            <p class="card-text" th:utext="${c.content}">
                            </p>

                        </div>
                        <div class="text-end me-2 my-2">
                            <a th:href="@{'/comm/{cId}/modify.do'(cId=${c.cId})}" class="btn btn-primary btn-sm me-1">수정</a>
                            <a th:href="@{'/comm/{cId}/remove.do'(cId=${c.cId})}" class="btn btn-danger btn-sm">삭제</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
</div>
</html>