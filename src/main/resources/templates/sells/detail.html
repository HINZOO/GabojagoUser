<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout}">
<head>
    <meta charset="UTF-8">
    <title>판매글 리스트</title>
</head>
<div layout:fragment="content">
    <div class="container">
        <div class="container my-5">
            <div class="row">
                <div class="col-md-6">
                    <img src="/public/img/sells/1.jpg" alt="상품 이미지" class="img-fluid">
                </div>
                <div class="col-md-6">
                    <h2 class="font-weight-bold mb-3" th:text="${s.title}"></h2>
                    <span class="text-muted small mb-2" th:text="${s.category}+'/'"></span>
                    <span class="small mb-2" th:text="${s.area}"></span>
                    <hr class="my-4">
                    <h4 class="font-weight-bold mb-3" th:text="${#dates.format(s.postTime,'yyyy-MM-dd')}"  pattern="yyyy-MM-dd"></h4>
                    <hr class="my-4">
                    <p class="small mb-2" th:text="${s.content}"></p>
                    <hr class="my-4">
                    <form>
                        <div class="form-group">
                            <label for="option-select">옵션</label>
                            <select class="form-control" id="option-select" name="option">
                                <option th:each="op:${s.getSellOption()}" th:value="${op.getName()}" th:text="${op.getName() + ' - ' + op.getPrice() + '원'}"></option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="quantity">수량</label>
                            <input type="number" class="form-control" id="quantity" name="quantity" value="1" min="1">
                        </div>
                        <button type="submit" class="btn btn-primary">추가하기</button>
                    </form>
                    <div id="selected-option"></div>
            </div>
        </div>
    </div>
    </div>
    <script>
        document.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault(); // 폼 제출 막기
            const option = document.querySelector('#option-select').value;
            const quantity = document.querySelector('#quantity').value;

            showSelectedOption(option, quantity);
        });

        function showSelectedOption(option, quantity) {
            const selectedOptionEl = document.querySelector('#selected-option');
            selectedOptionEl.insertAdjacentHTML("beforeend",action(option, quantity));
        }

        function action(option,quantity){
            return`<div class="card">
  <div class="card-body">
    <h5 class="card-title">선택한 옵션</h5>
    <div class="row">
      <div class="col-6">
        <p class="card-text">옵션:</p>
      </div>
      <div class="col-6">
        <p class="card-text" id="selected-option-option">${option}</p>
      </div>
    </div>
    <div class="row">
      <div class="col-6">
        <p class="card-text">수량:</p>
      </div>
      <div class="col-6">
        <p class="card-text" id="selected-option-quantity">${quantity}</p>
      </div>
    </div>
  </div>
</div>`
        }
    </script>
</div>
</html>